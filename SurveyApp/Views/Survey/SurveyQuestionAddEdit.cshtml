@using SurveyApp.Models;
@{
    ViewBag.Title = "eBit - Question Editor";
    Layout = "~/Views/Shared/_Layout.cshtml";

    int surveyId = string.IsNullOrEmpty(Request.QueryString["surveyId"]) == false ? Convert.ToInt32(Request.QueryString["surveyId"]) : 0;
}
@model SurveyApp.Models.SurveyQuestion


<h2><a href="javascript:void(0);" id="back" class="btnBack" title="Back to Questions List" data-toggle="tooltip"></a> &nbsp;Question Editor</h2>

<style>
    ._panel {
        background: #fafafa;
        border: solid 1px #cccccc;
        padding: 10px;
        border-radius: 6px;
    }
</style>
<br />

@using (Html.BeginForm("SurveyQuestionAddEdit", "Survey", FormMethod.Post, new { style = "width:800px;", @class = "form-horizontal" }))
{
    @Html.ValidationSummary()
    @Html.HiddenFor(m => m.ID, new { name = "hdnQuestionId", value = Model.ID })
    <div class="form-group">
        <label class="control-label col-sm-4">Question:*</label>
        <div class="col-sm-8">
            @Html.TextAreaFor(m => m.Question, new { id = "txtQuestion", @class = "form-control", placeholder = "Question", @maxlength = "1000", @style = "height:240px" })
        </div>
    </div>
    

    <div class="form-group">
        <label class="control-label col-sm-4"> </label>
        <div class="col-sm-offset-4 col-sm-8" style="margin-top:10px;">
            <button type="submit" id="btnSaveSurveyQuestion" class="btn btn-default">Save Information</button>
            <button type="button" class="btn btn-default" onclick="location.href='@Url.Action("SurveyQuestionList", "Survey")?surveyId=@surveyId';">Cancel</button>
        </div>
    </div>
}

<script type="text/javascript">
    $(function () {
        $(".btnBack").click(function(){
            bootbox.dialog({
                message: "Would you like to save the changes?",
                title: "Save Changes!",
                closeButton: false,
                onEscape: function() {
                    location.href = "@Url.Action("SurveyQuestionList", "Survey")?surveyId=@surveyId";
                },
                buttons: {
                    success: {
                        label: "Yes",
                        className: "btn-primary",
                        callback: function() {
                            $("#btnSaveSurveyQuestion").click();
                        }
                    },
                    danger: {
                        label: "No",
                        className: "btn-default",
                        callback: function() {
                            location.href = "@Url.Action("SurveyQuestionList", "Survey")?surveyId=@surveyId";
                        }
                    }
                }
            });
        });
    });

    $('[data-toggle="tooltip"]').tooltip({
        track: true,
        content: function () {
            return $(this).attr('title').replace(/_NEWLINE_/g, "<br/>");
        },
    });
</script>
